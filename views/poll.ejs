<div class="poll-card">
  <h1><%= poll.question %></h1>

  <% if(userVoted !== null){ %>
    <p style="font-size: 18px; margin: 20px 0;">You already voted for: <strong style="color: #667eea;"><%= poll.options[userVoted].text %></strong></p>
    <a href="/polls/<%= poll._id %>/results" class="btn" style="display: inline-block; text-decoration: none;">View Results</a>
  <% } else { %>
    <form method="post" action="/polls/<%= poll._id %>/vote">
      <div class="poll-options">
        <% poll.options.forEach((opt, idx)=>{ %>
          <label>
            <input type="radio" name="option" value="<%= idx %>" required />
            <%= opt.text %>
          </label>
        <% }) %>
      </div>
      <button type="submit">Vote</button>
    </form>
  <% } %>

  <% if(poll.expiresAt){ %>
    <p style="margin-top: 20px;"><small>Expires: <%= new Date(poll.expiresAt).toLocaleString() %></small></p>
  <% } %>

  <% if(currentUser && currentUser.role === 'admin'){ %>
    <form method="post" action="/polls/<%= poll._id %>?_method=DELETE" style="margin-top:20px;">
      <button type="submit" style="background:#dc3545;color:white;border:none;padding:10px 14px;border-radius:4px;cursor:pointer;"
        onclick="return confirm('Delete this poll? Votes will be removed too.');">
        ğŸ—‘ï¸ Delete Poll
      </button>
    </form>
  <% } %>
</div>

<a href="/" style="display: inline-block; margin-top: 20px;">â† Back to polls</a>
